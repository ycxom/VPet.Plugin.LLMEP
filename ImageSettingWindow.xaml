<pu:WindowX x:Class="VPet.Plugin.LLMEP.ImageSettingWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:pu="clr-namespace:Panuon.WPF.UI;assembly=Panuon.WPF.UI"
        mc:Ignorable="d"
        Title="LLMè¡¨æƒ…åŒ…æ’ä»¶è®¾ç½®" 
        Width="800" Height="700"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        FontSize="14">
    
    <Grid Background="#FAFAFA">
        <TabControl>
            <!-- åŸºæœ¬è®¾ç½® Tab -->
            <TabItem Header="âš™ï¸ åŸºæœ¬è®¾ç½®">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
                    <StackPanel>
                        <!-- åŠŸèƒ½å¼€å…³ -->
                        <GroupBox Header="åŠŸèƒ½å¼€å…³" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="CheckBoxEnabled" Content="å¯ç”¨æ’ä»¶" Margin="0,5" 
                                        Checked="CheckBoxEnabled_Changed" Unchecked="CheckBoxEnabled_Changed"/>
                                <CheckBox x:Name="CheckBoxBuiltInImages" Content="å¯ç”¨å†…ç½®è¡¨æƒ…åŒ…" Margin="0,5"
                                        Checked="CheckBoxBuiltInImages_Changed" Unchecked="CheckBoxBuiltInImages_Changed"/>
                                <CheckBox x:Name="CheckBoxDIYImages" Content="å¯ç”¨DIYè¡¨æƒ…åŒ…" Margin="0,5"
                                        Checked="CheckBoxDIYImages_Changed" Unchecked="CheckBoxDIYImages_Changed"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- æ—¶é—´è§¦å‘è®¾ç½® -->
                        <GroupBox Header="â° æ—¶é—´è§¦å‘" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="CheckBoxTimeTrigger" Content="å¯ç”¨æ—¶é—´è§¦å‘" Margin="0,5"
                                        Checked="CheckBoxTimeTrigger_Changed" Unchecked="CheckBoxTimeTrigger_Changed"/>
                                <StackPanel x:Name="TimeTriggerSettings" Margin="20,10,0,0">
                                    <StackPanel Orientation="Horizontal" Margin="0,5">
                                        <TextBlock Text="æ˜¾ç¤ºæ—¶é•¿:" VerticalAlignment="Center" Width="80"/>
                                        <Slider x:Name="SliderDisplayDuration" Width="200" Minimum="1" Maximum="10" Value="3" TickFrequency="1" IsSnapToTickEnabled="True"
                                              ValueChanged="SliderDisplayDuration_ValueChanged"/>
                                        <TextBlock Text="{Binding ElementName=SliderDisplayDuration, Path=Value, StringFormat={}{0:F0} ç§’}" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,5">
                                        <TextBlock Text="æ˜¾ç¤ºé—´éš”:" VerticalAlignment="Center" Width="80"/>
                                        <Slider x:Name="SliderDisplayInterval" Width="200" Minimum="1" Maximum="60" Value="10" TickFrequency="1" IsSnapToTickEnabled="True"
                                              ValueChanged="SliderDisplayInterval_ValueChanged"/>
                                        <TextBlock Text="{Binding ElementName=SliderDisplayInterval, Path=Value, StringFormat={}{0:F0} åˆ†é’Ÿ}" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                    </StackPanel>
                                    <CheckBox x:Name="CheckBoxRandomInterval" Content="éšæœºé—´éš”" Margin="0,5"
                                            Checked="CheckBoxRandomInterval_Changed" Unchecked="CheckBoxRandomInterval_Changed"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- æ°”æ³¡è§¦å‘è®¾ç½® -->
                        <GroupBox Header="ðŸ’¬ æ°”æ³¡è§¦å‘" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="CheckBoxBubbleTrigger" Content="å¯ç”¨æ°”æ³¡è§¦å‘" Margin="0,5"
                                        Checked="CheckBoxBubbleTrigger_Changed" Unchecked="CheckBoxBubbleTrigger_Changed"/>
                                <StackPanel x:Name="BubbleTriggerSettings" Margin="20,10,0,0">
                                    <StackPanel Orientation="Horizontal" Margin="0,5">
                                        <TextBlock Text="è§¦å‘æ¦‚çŽ‡:" VerticalAlignment="Center" Width="80"/>
                                        <Slider x:Name="SliderBubbleTriggerProbability" Width="200" Minimum="1" Maximum="100" Value="20" TickFrequency="1" IsSnapToTickEnabled="True"
                                              ValueChanged="SliderBubbleTriggerProbability_ValueChanged"/>
                                        <TextBlock Text="{Binding ElementName=SliderBubbleTriggerProbability, Path=Value, StringFormat={}{0:F0}%}" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- è¡¨æƒ…åŒ…ç›®å½• -->
                        <GroupBox Header="è¡¨æƒ…åŒ…ç›®å½•" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <TextBlock x:Name="TextBlockImagePath" Text="DIY_Expression/" FontFamily="Consolas" Background="#F5F5F5" Padding="5" Margin="0,5"/>
                                <Button x:Name="ButtonOpenFolder" Content="ðŸ“ æ‰“å¼€è¡¨æƒ…åŒ…æ–‡ä»¶å¤¹" Width="200" HorizontalAlignment="Left" Margin="0,5"
                                      Click="ButtonOpenFolder_Click"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- LLMè®¾ç½® Tab -->
            <TabItem Header="ðŸ¤– LLMè®¾ç½®">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
                    <StackPanel>
                        <!-- LLMåŠŸèƒ½å¼€å…³ -->
                        <GroupBox Header="LLMæƒ…æ„Ÿåˆ†æž" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="CheckBoxEmotionAnalysis" Content="å¯ç”¨LLMæƒ…æ„Ÿåˆ†æž" Margin="0,5"
                                        Checked="CheckBoxEmotionAnalysis_Changed" Unchecked="CheckBoxEmotionAnalysis_Changed"/>
                                <CheckBox x:Name="CheckBoxAccurateImageMatching" Content="æ›´åŠ ç²¾ç¡®çš„ä½¿ç”¨è¡¨æƒ…åŒ…" Margin="0,5"
                                        Checked="CheckBoxAccurateImageMatching_Changed" Unchecked="CheckBoxAccurateImageMatching_Changed"/>
                                <CheckBox x:Name="CheckBoxVisionModel" Content="æ˜¯å¯è¯»å–å›¾ç‰‡çš„æ¨¡åž‹(Vision)" Margin="0,5"
                                        Checked="CheckBoxVisionModel_Changed" Unchecked="CheckBoxVisionModel_Changed"/>
                                <TextBlock Text="â„¹ï¸ å¯ç”¨åŽå¯ä½¿ç”¨AIè¯†åˆ«å›¾ç‰‡å¹¶ç”Ÿæˆæ ‡ç­¾åŠŸèƒ½" Foreground="#666666" FontSize="12" Margin="20,0,0,0" TextWrapping="Wrap"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- LLMæä¾›å•†é€‰æ‹© -->
                        <GroupBox Header="LLMæä¾›å•†" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <ComboBox x:Name="ComboBoxLLMProvider" Margin="0,5" SelectionChanged="ComboBoxLLMProvider_SelectionChanged">
                                    <ComboBoxItem Content="OpenAI" Tag="openai"/>
                                    <ComboBoxItem Content="Google Gemini" Tag="gemini"/>
                                    <ComboBoxItem Content="Ollama (æœ¬åœ°)" Tag="ollama"/>
                                    <ComboBoxItem Content="Free (å…è´¹)" Tag="free"/>
                                </ComboBox>
                            </StackPanel>
                        </GroupBox>

                        <!-- OpenAIé…ç½® -->
                        <GroupBox x:Name="PanelOpenAI" Header="OpenAI é…ç½®" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <TextBlock Text="API Key:" Margin="0,5,0,2"/>
                                <TextBox x:Name="TextBoxOpenAIKey" Margin="0,0,0,10" TextChanged="TextBoxOpenAIKey_TextChanged"/>
                                <TextBlock Text="Base URL:" Margin="0,5,0,2"/>
                                <TextBox x:Name="TextBoxOpenAIBaseUrl" Text="https://api.openai.com/v1" Margin="0,0,0,10" TextChanged="TextBoxOpenAIBaseUrl_TextChanged"/>
                                <TextBlock Text="æ¨¡åž‹:" Margin="0,5,0,2"/>
                                <StackPanel Orientation="Horizontal">
                                    <ComboBox x:Name="ComboBoxOpenAIModel" Width="200" IsEditable="True" Text="gpt-3.5-turbo"
                                            SelectionChanged="ComboBoxOpenAIModel_SelectionChanged" LostFocus="ComboBoxOpenAIModel_LostFocus"/>
                                    <Button x:Name="ButtonFetchOpenAIModels" Content="ðŸ” èŽ·å–æ¨¡åž‹" Margin="10,0,0,0" Click="ButtonFetchOpenAIModels_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- Geminié…ç½® -->
                        <GroupBox x:Name="PanelGemini" Header="Google Gemini é…ç½®" Margin="0,0,0,20" Visibility="Collapsed">
                            <StackPanel Margin="10">
                                <TextBlock Text="API Key:" Margin="0,5,0,2"/>
                                <TextBox x:Name="TextBoxGeminiKey" Margin="0,0,0,10" TextChanged="TextBoxGeminiKey_TextChanged"/>
                                <TextBlock Text="Base URL:" Margin="0,5,0,2"/>
                                <TextBox x:Name="TextBoxGeminiBaseUrl" Text="https://generativelanguage.googleapis.com/v1beta" Margin="0,0,0,10" TextChanged="TextBoxGeminiBaseUrl_TextChanged"/>
                                <TextBlock Text="æ¨¡åž‹:" Margin="0,5,0,2"/>
                                <StackPanel Orientation="Horizontal">
                                    <ComboBox x:Name="ComboBoxGeminiModel" Width="200" IsEditable="True" Text="gemini-pro"
                                            SelectionChanged="ComboBoxGeminiModel_SelectionChanged" LostFocus="ComboBoxGeminiModel_LostFocus"/>
                                    <Button x:Name="ButtonFetchGeminiModels" Content="ðŸ” èŽ·å–æ¨¡åž‹" Margin="10,0,0,0" Click="ButtonFetchGeminiModels_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- Ollamaé…ç½® -->
                        <GroupBox x:Name="PanelOllama" Header="Ollama é…ç½®" Margin="0,0,0,20" Visibility="Collapsed">
                            <StackPanel Margin="10">
                                <TextBlock Text="Base URL:" Margin="0,5,0,2"/>
                                <TextBox x:Name="TextBoxOllamaBaseUrl" Text="http://localhost:11434" Margin="0,0,0,10" TextChanged="TextBoxOllamaBaseUrl_TextChanged"/>
                                <TextBlock Text="æ¨¡åž‹:" Margin="0,5,0,2"/>
                                <StackPanel Orientation="Horizontal">
                                    <ComboBox x:Name="ComboBoxOllamaModel" Width="200" IsEditable="True" Text="llama2"
                                            SelectionChanged="ComboBoxOllamaModel_SelectionChanged" LostFocus="ComboBoxOllamaModel_LostFocus"/>
                                    <Button x:Name="ButtonFetchOllamaModels" Content="ðŸ” èŽ·å–æ¨¡åž‹" Margin="10,0,0,0" Click="ButtonFetchOllamaModels_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- Freeé…ç½® -->
                        <GroupBox x:Name="PanelFree" Header="Free é…ç½® (å…è´¹)" Margin="0,0,0,20" Visibility="Collapsed">
                            <StackPanel Margin="10">
                                <TextBlock x:Name="TextBlockFreeDescription" 
                                         Text="â„¹ï¸ FreeæœåŠ¡ä½¿ç”¨VPetLLMçš„å…è´¹é…ç½®ï¼Œæ— éœ€é¢å¤–è®¾ç½®API Key" 
                                         Foreground="Blue" Margin="0,0,0,10" TextWrapping="Wrap"/>
                                <TextBlock x:Name="TextBlockFreeProvider" 
                                         Text="æ„Ÿè°¢æä¾›è€… QQï¼š790132463" 
                                         Foreground="Green" Margin="0,0,0,10" TextWrapping="Wrap"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- åœ¨çº¿ç½‘ç»œè¡¨æƒ…åŒ…åº“ Tab -->
            <TabItem Header="ðŸŒ åœ¨çº¿è¡¨æƒ…åŒ…åº“">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
                    <StackPanel>
                        <!-- åœ¨çº¿è¡¨æƒ…åŒ…åŠŸèƒ½å¼€å…³ -->
                        <GroupBox Header="åœ¨çº¿ç½‘ç»œè¡¨æƒ…åŒ…åº“" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="CheckBoxOnlineSticker" Content="å¯ç”¨åœ¨çº¿ç½‘ç»œè¡¨æƒ…åŒ…åº“" Margin="0,5"
                                        Checked="CheckBoxOnlineSticker_Changed" Unchecked="CheckBoxOnlineSticker_Changed"/>
                                <TextBlock Text="â„¹ï¸ åœ¨çº¿è¡¨æƒ…åŒ…åº“æä¾›ä¸°å¯Œçš„ç½‘ç»œè¡¨æƒ…èµ„æºï¼Œå¯ä»¥æ ¹æ®æƒ…æ„Ÿåˆ†æžç»“æžœè‡ªåŠ¨åŒ¹é…åˆé€‚çš„è¡¨æƒ…åŒ…" 
                                         Foreground="Blue" Margin="0,5,0,0" TextWrapping="Wrap" FontSize="12"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- æœåŠ¡é…ç½® -->
                        <GroupBox x:Name="GroupBoxOnlineStickerConfig" Header="æœåŠ¡é…ç½®" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="CheckBoxUseBuiltInCredentials" Content="ä½¿ç”¨ VPetLLM è¡¨æƒ…åŒ…æœåŠ¡å™¨" Margin="0,5"
                                        Checked="CheckBoxUseBuiltInCredentials_Changed" Unchecked="CheckBoxUseBuiltInCredentials_Changed"/>
                                <TextBlock Text="ä½¿ç”¨ VPetLLM è¡¨æƒ…åŒ…æœåŠ¡" 
                                         Foreground="Green" Margin="0,5,0,10" TextWrapping="Wrap" FontSize="12"/>
                                
                                <!-- è‡ªå®šä¹‰æœåŠ¡é…ç½® -->
                                <StackPanel x:Name="PanelCustomService" Visibility="Collapsed">
                                    <TextBlock Text="æœåŠ¡åœ°å€:" Margin="0,5,0,2"/>
                                    <TextBox x:Name="TextBoxOnlineServiceUrl" Margin="0,0,0,10" TextChanged="TextBoxOnlineServiceUrl_TextChanged"/>
                                    <TextBlock Text="API Key:" Margin="0,5,0,2"/>
                                    <TextBox x:Name="TextBoxOnlineApiKey" Margin="0,0,0,10" TextChanged="TextBoxOnlineApiKey_TextChanged"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- æ˜¾ç¤ºè®¾ç½® -->
                        <GroupBox x:Name="GroupBoxOnlineStickerDisplay" Header="æ˜¾ç¤ºè®¾ç½®" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <StackPanel Orientation="Horizontal" Margin="0,5">
                                    <TextBlock Text="æ˜¾ç¤ºæ—¶é•¿:" VerticalAlignment="Center" Width="80"/>
                                    <Slider x:Name="SliderOnlineDisplayDuration" Width="200" Minimum="1" Maximum="30" Value="6" TickFrequency="1" IsSnapToTickEnabled="True"
                                          ValueChanged="SliderOnlineDisplayDuration_ValueChanged"/>
                                    <TextBlock Text="{Binding ElementName=SliderOnlineDisplayDuration, Path=Value, StringFormat={}{0:F0} ç§’}" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,5">
                                    <TextBlock Text="æ ‡ç­¾æ•°é‡:" VerticalAlignment="Center" Width="80"/>
                                    <Slider x:Name="SliderOnlineTagCount" Width="200" Minimum="1" Maximum="50" Value="10" TickFrequency="1" IsSnapToTickEnabled="True"
                                          ValueChanged="SliderOnlineTagCount_ValueChanged"/>
                                    <TextBlock Text="{Binding ElementName=SliderOnlineTagCount, Path=Value, StringFormat={}{0:F0} ä¸ª}" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,5">
                                    <TextBlock Text="ç¼“å­˜æ—¶é•¿:" VerticalAlignment="Center" Width="80"/>
                                    <Slider x:Name="SliderOnlineCacheDuration" Width="200" Minimum="1" Maximum="60" Value="5" TickFrequency="1" IsSnapToTickEnabled="True"
                                          ValueChanged="SliderOnlineCacheDuration_ValueChanged"/>
                                    <TextBlock Text="{Binding ElementName=SliderOnlineCacheDuration, Path=Value, StringFormat={}{0:F0} åˆ†é’Ÿ}" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- ä½¿ç”¨åœºæ™¯è®¾ç½® -->
                        <GroupBox x:Name="GroupBoxOnlineStickerUsage" Header="ä½¿ç”¨åœºæ™¯" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="CheckBoxOnlinePreferOnline" Content="ä¼˜å…ˆä½¿ç”¨åœ¨çº¿è¡¨æƒ…åŒ…" Margin="0,5"
                                        Checked="CheckBoxOnlinePreferOnline_Changed" Unchecked="CheckBoxOnlinePreferOnline_Changed"/>
                                <TextBlock Text="å‹¾é€‰åŽå°†ä¼˜å…ˆä½¿ç”¨åœ¨çº¿è¡¨æƒ…åŒ…ï¼Œå¦åˆ™ä½œä¸ºæœ¬åœ°è¡¨æƒ…åŒ…çš„è¡¥å……" 
                                         Foreground="#666666" Margin="20,0,0,10" TextWrapping="Wrap" FontSize="12"/>
                                
                                <CheckBox x:Name="CheckBoxOnlineInEmotion" Content="åœ¨æƒ…æ„Ÿåˆ†æžä¸­ä½¿ç”¨" Margin="0,5"
                                        Checked="CheckBoxOnlineInEmotion_Changed" Unchecked="CheckBoxOnlineInEmotion_Changed"/>
                                <CheckBox x:Name="CheckBoxOnlineInRandom" Content="åœ¨éšæœºæ˜¾ç¤ºä¸­ä½¿ç”¨" Margin="0,5"
                                        Checked="CheckBoxOnlineInRandom_Changed" Unchecked="CheckBoxOnlineInRandom_Changed"/>
                                <CheckBox x:Name="CheckBoxOnlineInBubble" Content="åœ¨æ°”æ³¡è§¦å‘ä¸­ä½¿ç”¨" Margin="0,5"
                                        Checked="CheckBoxOnlineInBubble_Changed" Unchecked="CheckBoxOnlineInBubble_Changed"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- è¿žæŽ¥æµ‹è¯• -->
                        <GroupBox x:Name="GroupBoxOnlineStickerTest" Header="è¿žæŽ¥æµ‹è¯•" Margin="0,0,0,20">
                            <StackPanel Margin="10">
                                <StackPanel Orientation="Horizontal" Margin="0,5">
                                    <Button x:Name="ButtonTestOnlineConnection" Content="ðŸ”— æµ‹è¯•è¿žæŽ¥" Width="120" Margin="0,0,10,0" Click="ButtonTestOnlineConnection_Click"/>
                                    <Button x:Name="ButtonTestOnlineSticker" Content="ðŸŽ­ æµ‹è¯•è¡¨æƒ…åŒ…" Width="120" Click="ButtonTestOnlineSticker_Click"/>
                                </StackPanel>
                                <TextBlock x:Name="TextBlockOnlineStatus" Text="å‡†å¤‡å°±ç»ª" Margin="0,10,0,0" FontSize="12" Foreground="#666666"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- æ ‡ç­¾ç®¡ç† Tab -->
            <TabItem Header="ðŸ·ï¸ æ ‡ç­¾ç®¡ç†">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- AIæ ‡ç­¾ç”Ÿæˆè®¾ç½® -->
                    <GroupBox Grid.Row="0" Header="ðŸ¤– AIæ ‡ç­¾ç”Ÿæˆ" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <CheckBox x:Name="CheckBoxAIImageTagging" Content="å…è®¸AIè¯†åˆ«å›¾ç‰‡å¹¶ç”Ÿæˆæ ‡ç­¾" Margin="0,5"
                                    Checked="CheckBoxAIImageTagging_Changed" Unchecked="CheckBoxAIImageTagging_Changed"/>
                            <TextBlock Text="â„¹ï¸ éœ€è¦å…ˆåœ¨LLMè®¾ç½®ä¸­å¯ç”¨&quot;æ˜¯å¯è¯»å–å›¾ç‰‡çš„æ¨¡åž‹&quot;ï¼Œå¹¶é…ç½®æ”¯æŒVisionçš„LLMæ¨¡åž‹ï¼ˆå¦‚Gemini 2.5 flashç­‰ï¼‰" 
                                     Foreground="#666666" FontSize="12" Margin="20,5,0,0" TextWrapping="Wrap"/>
                            <TextBlock x:Name="TextBlockAIProcessingStatus" Text="çŠ¶æ€: ç­‰å¾…å¼€å§‹" Margin="20,10,0,0" FontSize="12" Foreground="#0066CC"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- é¡¶éƒ¨æ“ä½œæ  -->
                    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,15">
                        <Button x:Name="ButtonScanImages" Content="ðŸ” æ‰«æå›¾ç‰‡" Width="120" Margin="0,0,10,0" Click="ButtonScanImages_Click"/>
                        <Button x:Name="ButtonSaveLabels" Content="ðŸ’¾ ä¿å­˜æ ‡ç­¾" Width="120" Click="ButtonSaveLabels_Click"/>
                        <Button x:Name="ButtonStartAIProcessing" Content="ðŸ¤– å¼€å§‹AIå¤„ç†" Width="120" Margin="10,0,0,0" Click="ButtonStartAIProcessing_Click"/>
                    </StackPanel>

                    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
                    <Grid Grid.Row="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- å·¦ä¾§ï¼šå›¾ç‰‡æ ‘å½¢åˆ—è¡¨ -->
                        <GroupBox Grid.Column="0" Header="ðŸ“ å›¾ç‰‡ç›®å½•" Margin="0,0,10,0">
                            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                                <TreeView x:Name="TreeViewImages" Background="Transparent" BorderThickness="0" SelectedItemChanged="TreeViewImages_SelectedItemChanged"/>
                            </ScrollViewer>
                        </GroupBox>

                        <!-- å³ä¾§ï¼šå›¾ç‰‡é¢„è§ˆå’Œæ ‡ç­¾ç¼–è¾‘ -->
                        <GroupBox Grid.Column="1" Header="ðŸ–¼ï¸ å›¾ç‰‡è¯¦æƒ…" Margin="10,0,0,0">
                            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                                <Grid>
                                    <!-- ç©ºçŠ¶æ€æ˜¾ç¤º -->
                                    <StackPanel x:Name="PanelEmptyState" 
                                              HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"
                                              Visibility="Visible">
                                        <TextBlock Text="ðŸ“·" FontSize="48" HorizontalAlignment="Center" Foreground="#CCCCCC" Margin="0,0,0,16"/>
                                        <TextBlock Text="é€‰æ‹©å›¾ç‰‡å¼€å§‹ç¼–è¾‘æ ‡ç­¾" FontSize="16" HorizontalAlignment="Center" Foreground="#999999"/>
                                    </StackPanel>

                                    <!-- å›¾ç‰‡è¯¦æƒ…é¢æ¿ -->
                                    <StackPanel x:Name="PanelImageDetails" Visibility="Collapsed">
                                        <TextBlock x:Name="TextBlockImageTitle" Text="ðŸ–¼ï¸ é€‰æ‹©å›¾ç‰‡æŸ¥çœ‹é¢„è§ˆ" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>
                                        
                                        <!-- å›¾ç‰‡é¢„è§ˆ -->
                                        <Border Background="#F8F8F8" BorderBrush="#E0E0E0" BorderThickness="1" Padding="8" Margin="0,0,0,10" MaxHeight="200">
                                            <Image x:Name="ImagePreview" Stretch="Uniform" StretchDirection="DownOnly"/>
                                        </Border>

                                        <!-- å›¾ç‰‡ä¿¡æ¯ -->
                                        <TextBlock x:Name="TextBlockFileName" Text="æ–‡ä»¶å: " FontSize="12" Foreground="#666666" Margin="0,0,0,4"/>
                                        <TextBlock x:Name="TextBlockFileSize" Text="å¤§å°: " FontSize="12" Foreground="#666666" Margin="0,0,0,10"/>
                                        
                                        <!-- æ ‡ç­¾ç¼–è¾‘åŒºåŸŸ -->
                                        <TextBlock Text="ðŸ·ï¸ å›¾ç‰‡æ ‡ç­¾" FontSize="14" FontWeight="Bold" Margin="0,0,0,5"/>
                                        <TextBlock Text="ç”¨é€—å·åˆ†éš”å¤šä¸ªæ ‡ç­¾ï¼Œå¦‚ï¼šå¼€å¿ƒ,ç¬‘è„¸,é«˜å…´" FontSize="12" Foreground="#999999" Margin="0,0,0,5"/>
                                        <TextBox x:Name="TextBoxImageTags" Height="60" TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto" TextChanged="TextBoxImageTags_TextChanged" Margin="0,0,0,10"/>
                                        
                                        <!-- å¿ƒæƒ…é€‰æ‹© -->
                                        <TextBlock Text="ðŸ’­ å¿ƒæƒ…åˆ†ç±»" FontSize="14" FontWeight="Bold" Margin="0,0,0,5"/>
                                        <TextBlock Text="é€‰æ‹©æ­¤å›¾ç‰‡å¯¹åº”çš„å¿ƒæƒ…ï¼Œæœªé€‰æ‹©æ—¶ä½œä¸ºæ³›ç”¨è¡¨æƒ…åŒ…" FontSize="12" Foreground="#999999" Margin="0,0,0,5"/>
                                        <ComboBox x:Name="ComboBoxEmotion" SelectionChanged="ComboBoxEmotion_SelectionChanged">
                                            <ComboBoxItem Content="æ³›ç”¨ (General)" Tag="general"/>
                                            <ComboBoxItem Content="å¼€å¿ƒ (Happy)" Tag="happy"/>
                                            <ComboBoxItem Content="æ­£å¸¸ (Normal)" Tag="normal"/>
                                            <ComboBoxItem Content="çŠ¶æ€ä¸ä½³ (Poor)" Tag="poor"/>
                                            <ComboBoxItem Content="ç”Ÿç—… (Ill)" Tag="ill"/>
                                        </ComboBox>
                                    </StackPanel>
                                </Grid>
                            </ScrollViewer>
                        </GroupBox>
                    </Grid>

                    <!-- åº•éƒ¨çŠ¶æ€æ  -->
                    <Border Grid.Row="3" Background="#F8F8F8" BorderBrush="#E0E0E0" BorderThickness="1" Padding="10" Margin="0,20,0,0">
                        <TextBlock x:Name="TextBlockStatus" Text="å‡†å¤‡å°±ç»ª" FontSize="12" Foreground="#666666"/>
                    </Border>
                </Grid>
            </TabItem>

            <!-- è°ƒè¯• Tab -->
            <TabItem Header="ðŸ”§ è°ƒè¯•">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- è°ƒè¯•è®¾ç½® -->
                    <GroupBox Grid.Row="0" Header="è°ƒè¯•è®¾ç½®" Margin="0,0,0,20">
                        <StackPanel Margin="10">
                            <CheckBox x:Name="CheckBoxDebugMode" Content="è°ƒè¯•æ¨¡å¼" Margin="0,5" Checked="CheckBoxDebugMode_Changed" Unchecked="CheckBoxDebugMode_Changed"/>
                            <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                <TextBlock Text="æ—¥å¿—ç­‰çº§:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                <ComboBox x:Name="ComboBoxLogLevel" Width="120" SelectionChanged="ComboBoxLogLevel_SelectionChanged">
                                    <ComboBoxItem Content="Debug" Tag="0"/>
                                    <ComboBoxItem Content="Info" Tag="1"/>
                                    <ComboBoxItem Content="Warning" Tag="2"/>
                                    <ComboBoxItem Content="Error" Tag="3"/>
                                </ComboBox>
                                <CheckBox x:Name="CheckBoxFileLogging" Content="æ–‡ä»¶æ—¥å¿—" Margin="20,0,0,0" Checked="SwitchFileLogging_Changed" Unchecked="SwitchFileLogging_Changed"/>
                            </StackPanel>
                        </StackPanel>
                    </GroupBox>

                    <!-- æ—¥å¿—æ˜¾ç¤ºåŒºåŸŸ -->
                    <GroupBox Grid.Row="2" Header="ðŸ“‹ è°ƒè¯•æ—¥å¿—">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            
                            <Button Grid.Row="0" x:Name="ButtonClearLog" Content="ðŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—" Width="100" HorizontalAlignment="Right" Margin="0,0,0,10" Click="ButtonClearLog_Click"/>
                            
                            <ScrollViewer Grid.Row="1" x:Name="LogScrollViewer" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                                <TextBox x:Name="TextBoxLog" IsReadOnly="True" TextWrapping="Wrap" BorderThickness="0" Background="Transparent" FontFamily="Consolas" FontSize="11" Text="æ—¥å¿—å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."/>
                            </ScrollViewer>
                        </Grid>
                    </GroupBox>
                </Grid>
            </TabItem>
        </TabControl>
        
        <!-- åº•éƒ¨æŒ‰é’®æ  -->
        <Grid VerticalAlignment="Bottom" Background="White" Height="60">
            <Border BorderBrush="#E0E0E0" BorderThickness="0,1,0,0"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="20">
                <Button x:Name="ButtonTestDisplay" Content="ðŸŽ­ æµ‹è¯•æ˜¾ç¤º" Width="100" Margin="0,0,10,0" Click="ButtonTestDisplay_Click"/>
                <Button x:Name="ButtonSave" Content="ðŸ’¾ ä¿å­˜" Width="80" Margin="0,0,10,0" Click="ButtonSave_Click"/>
                <Button x:Name="ButtonReset" Content="ðŸ”„ é‡ç½®" Width="80" Margin="0,0,10,0" Click="ButtonReset_Click"/>
                <Button x:Name="ButtonCancel" Content="âŒ å–æ¶ˆ" Width="80" Click="ButtonCancel_Click"/>
            </StackPanel>
        </Grid>
    </Grid>
</pu:WindowX>